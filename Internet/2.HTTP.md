# HTTP

HTTP(The Hypertext Transfer Protocol): 클라이언트와 서버가 서로 통신하는 방식을 표준화하는 TCP/IP 기반 애플리케이션 계층 통신 프로토콜

- 인터넷을 통해 콘텐츠를 요청하고 전송하는 방식을 정의
- 월드 와이드 웹 기반이며 하이퍼텍스트 링크를 사용하여 웹 페이지를 로드하는 데 사용됨
- Application layer protocol: 호스트(클라이언트와 서버)가 통신하는 방식을 표준화하는 추상화 계층
- HTTP 자체는 클라이언트와 서버 간의 요청과 응답을 얻기 위해 TCP/IP에 의존

## HTTP Structure

### HTTP request

HTTP 요청은 웹 브라우저와 같은 인터넷 통신 플랫폼이 웹사이트를 로드하는 데 필요한 정보를 요청하는 방식  
인터넷을 통해 요청할 때마다 다양한 유형의 정보를 전달하는 일련의 인코딩된 데이터가 함께 제공됨

- HTTP version type
- a URL
- an HTTP method
- HTTP request headers
- Optional HTTP body

#### HTTP method

HTTP 메서드는 HTTP 요청이 쿼리된 서버에서 기대하는 작업을 나타냄  
가장 일반적인 두 가지 HTTP 메서드는 'GET', 'POST'  
'GET' 요청은 응답으로 정보를 기대하는 반면, 'POST' 요청은 일반적으로 클라이언트가 웹 서버에 정보를 제출하고 있음을 나타냄

#### HTTP request headers

HTTP 헤더에는 키값 쌍에 저장된 텍스트 정보가 포함되어 있으며 헤더는 모든 HTTP 요청에 포함됨  
헤더는 클라이언트가 사용하는 브라우저 및 요청되는 데이터와 같은 핵심 정보를 전달함

#### HTTP request body

요청의 본문은 요청에서 전송되는 정보의 본문을 포함하는 부분  
HTTP 요청의 본문에는 웹 서버에 제출되는 모든 정보가 포함됨

### HTTP response

HTTP 응답은 웹 클라이언트에서 HTTP 요청에 대한 응답으로 인터넷 서버로부터 수신하는 응답  
HTTP 요청에서 요청된 내용을 기반으로 중요한 정보를 전달

- an HTTP status code
- HTTP response headers
- optional HTTP body

#### HTTP status code

HTTP 상태 코드는 HTTP 요청이 성공적으로 완료되었는지 여부를 나타내는 데 가장 자주 사용되는 3자리 코드  
XX는 00에서 99사이의 다른 숫자들을 나타냄

- 1XX 정보 제공
- 2XX 성공
- 3XX 리디렉션
- 4XX 클라이언트 오류
- 5XX 서버 오류

#### HTTP response headers

HTTP 응답에는 응답 본문에서 전송되는 데이터의 언어 및 형식과 같은 중요한 정보를 전달하는 헤더가 함께 제공됨

#### HTTP response body

'GET'요청에 대한 성공적인 HTTP 응답에는 일반적으로 요청된 정보가 포함된 본문이 있음  
대부분의 웹 요청의 경우 이는 웹 브라우저에서 웹 페이지로 변환되는 HTML 데이터

### DDoS attack

DoS 또는 DDoS 공격의 컨텍스트에서 대량의 HTTP 요청을 사용하여 대상 디바이스에 대한 공격을 개시할 수 있으며 이는 애플리케이션 계층 공격 또는 계층 7 공격의 일부로 간주됨

## HTTP Versions

### HTTP/0.9 - 1991년

최초의 문서화된 버전의 HTTP

- headers 없음
- GET만 유일하게 허용
- 서버는 요청을 받고 HTML로 응답하며 콘텐츠가 전송되는 즉시 연결이 닫힘

### HTTP/1.0 - 1996년

HTML 응답만을 위해 설계된 HTTP/0.9와 달리 이미지, 비디오 파일, 일반 텍스트 또는 기타 컨텐츠 유형과 같은 다른 응답 형식도 처리할 수 있게 됨  
HTTP/0.9에서는 헤더가 없기 때문에 클라이언트가 개인 정보, 필수 응답 유형 등의 정보를 보낼 수 없었지만 HTTP/1.0은 가능  
이제 서버는 모든 콘텐츠 유형을 클라이언트에 전송할 수 있게 되었고, 도입된 지 얼마 지나지 않아 HTTP에서 "하이퍼 텍스트"라는 용어는 잘못된 이름이 됨  
HMTP 또는 하이퍼미디어 전송 프로토콜이 더 합리적이었을 수도 있지만, HTTP 그대로 사용  
클라이언트가 서버에서 필요한 것이 있을 때마다 새 TCP 연결을 열어야 하며, 한 번의 요청이 완료되면 연결이 닫힘  
10개의 이미지, 5개의 스타일시트, 5개의 자바스크립트 파일로 구성된 웹페이지를 방문하여 해당 웹페이지에 요청할 때 가져와야 하는 항목이 총 20개라고 가정 -> 요청이 완료되는 즉시 서버가 연결을 닫으므로, 각 항목이 개별 연결에서 하나씩 제공되는 20개의 개별 연결이 연속적으로 발생 -> 많은 수의 연결로 인해 새로운 TCP 연결이 필요한 심각한 성능 타격을 입게 되며, 이는 Three-way handshake와 느린 시작으로 인해 상당한 성능 저하를 초래

#### Three-way Handshake

- SYN: 클라이언트가 X라고 가정하여 무작위 숫자를 선택하여 서버로 보냄
- SYN ACK: 서버가 무작위 숫자로 구성된 ACK 패킷을 클라이언트에게 다시 전송하여 요청을 승인, 서버가 y를 수신하고 숫자 x+1
- ACK: 클라이언트가 서버로부터 수신한 수를 늘리고 숫자 y+1로 ACK 패킷을 다시 보냄

Three-way handshake가 완료되면 클라이언트와 서버 간의 데이터 공유가 시작될 수 있음  
클라이언트가 마지막 ACK 패킷을 발송하자마자 애플리케이션 데이터 전송을 시작할 수 있지만, 요청을 처리하기 위해 서버는 ACK 패킷이 수신될 때까지 기다려야 함

### HTTP/1.1

### HTTP/2

### HTTP/3

## 참고

https://www.cloudflare.com/learning/ddos/glossary/hypertext-transfer-protocol-http/

https://cs.fyi/guide/http-in-depth

https://thenewstack.io/http-3-is-now-a-standard-why-use-it-and-how-to-get-started/
